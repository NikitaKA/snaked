!function(u){function e(e){for(var t,n,i=e[0],a=e[1],r=e[2],o=0,s=[];o<i.length;o++)n=i[o],c[n]&&s.push(c[n][0]),c[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(u[t]=a[t]);for(d&&d(e);s.length;)s.shift()();return h.push.apply(h,r||[]),l()}function l(){for(var e,t=0;t<h.length;t++){for(var n=h[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==c[r]&&(i=!1)}i&&(h.splice(t--,1),e=o(o.s=n[0]))}return e}var n={},c={4:0,3:0,5:0,7:0,9:0,10:0,12:0,13:0},h=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=u,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var d=i;h.push([5,0]),l()}([,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var i=n(2),a=n.n(i),r=n(3),o=n.n(r);function s(e){var t=Math.round(Math.random()*(e.sizeX-1))*e.cellSize,n=Math.round(Math.random()*(e.sizeY-1))*e.cellSize;return new u(t,n)}var u=function(){function n(e,t){a()(this,n),this.x=e,this.y=t}return o()(n,null,[{key:"generate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=s(e),i=null;if(!t)for(;!i;)e.getCell(n)?n=s(e):i=n;return i||n}}]),n}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DIRECTION_LEFT",function(){return l}),n.d(t,"DIRECTION_RIGHT",function(){return c}),n.d(t,"DIRECTION_UP",function(){return h}),n.d(t,"DIRECTION_DOWN",function(){return d}),n.d(t,"CONTROLS_ARROWS",function(){return f}),n.d(t,"CONTROLS_WSAD",function(){return o}),n.d(t,"default",function(){return p});var i=n(2),s=n.n(i),a=n(3),r=n.n(a),u=n(8),l="DIRECTION_LEFT",c="DIRECTION_RIGHT",h="DIRECTION_UP",d="DIRECTION_DOWN",f={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},o={left:"KeyA",right:"KeyD",up:"KeyW",down:"KeyS"},p=function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,n=t.left,i=t.right,a=t.up,r=t.down;s()(this,o),this.app=e,this.direction=null,this.keysPressed={},this.kLeft=n,this.kRight=i,this.kUp=a,this.kDown=r,this.init()}return r()(o,[{key:"init",value:function(){var t=this;window.addEventListener("keydown",function(e){if(t.app.state===u.STATE_PAUSED||t.app.state===u.STATE_STOPPED)return!1;t.keyDown(e)}),window.addEventListener("keyup",function(e){if(t.app.state===u.STATE_PAUSED||t.app.state===u.STATE_STOPPED)return!1;t.keyUp(e)})}},{key:"keyDown",value:function(e){this.keysPressed[e.code]=performance.now(),this.selectDirection()}},{key:"keyUp",value:function(e){this.keysPressed[e.code]=0,this.selectDirection()}},{key:"selectDirection",value:function(){var n=this,i=null,a=0;switch(Object.keys(this.keysPressed).forEach(function(e){var t=n.keysPressed[e];(!a&&t||a&&t&&a<t)&&(i=e,a=t)}),i){case this.kLeft:this.direction=l;break;case this.kRight:this.direction=c;break;case this.kUp:this.direction=h;break;case this.kDown:this.direction=d}}}]),o}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var i=n(2),a=n.n(i),r=n(3),o=n.n(r),s=n(4),u=function(){function i(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,n=void 0===t?0:t;a()(this,i),this.coords=e,this.msPassed=0,this.animationSpeed=n}return o()(i,[{key:"tick",value:function(e){this.msPassed+=e,this.animationSpeed?this.deTick(this.update):this.update()}},{key:"deTick",value:function(e){this.msPassed>=this.animationSpeed&&(this.msPassed=this.msPassed-this.animationSpeed,e(),this.deTick(e))}},{key:"update",value:function(){}}],[{key:"generate",value:function(e){return new i(s.default.generate(e))}}]),i}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DRAWTEXT_ALIGN_CENTER",function(){return o}),n.d(t,"drawText",function(){return i});var o="center";function i(t,e){var n=e.padding||0,i=0,a=0;switch(e.lines.forEach(function(e){t.font=e.font,e.paddingBottom=e.paddingBottom||0,e.width=t.measureText(e.text).width,e.width>i&&(i=e.width),a+=e.height+e.paddingBottom}),t.save(),e.align){case o:t.translate(0,(t.canvas.height-a-2*n)/2),t.fillStyle=e.bgcolor,t.globalAlpha=e.bgAlpha||1,t.fillRect(t.canvas.width/2-i/2-n,0,i+2*n,a+2*n),t.globalAlpha=e.alpha||1;var r=n;e.lines.forEach(function(e){t.textBaseline=e.baseline||"middle",t.fillStyle=e.color||"black",t.font=e.font,t.fillText(e.text,t.canvas.width/2-e.width/2,r+e.height/2),r+=e.height+e.paddingBottom})}t.restore()}},function(e,t,n){"use strict";n.r(t),n.d(t,"STATE_INITIALIZED",function(){return p}),n.d(t,"STATE_PAUSED",function(){return v}),n.d(t,"STATE_RUNNING",function(){return w}),n.d(t,"STATE_STOPPED",function(){return k}),n.d(t,"default",function(){return y});var i=n(2),r=n.n(i),a=n(3),o=n.n(a),s=n(1),u=n.n(s),l=n(0),c=n.n(l),h=n(15),d=n(11),f=n(16),p="STATE_INITIALIZED",v="STATE_PAUSED",w="STATE_RUNNING",k="STATE_STOPPED",y=function(){function a(e){var n=this,t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).debug,i=void 0!==t&&t;r()(this,a),g.set(this,{writable:!0,value:!1}),S.set(this,{writable:!0,value:null}),b.set(this,{writable:!0,value:p}),m.set(this,{writable:!0,value:0}),T.set(this,{writable:!0,value:[]}),E.set(this,{writable:!0,value:null}),D.set(this,{writable:!0,value:function(){n.field.app=n,window.addEventListener("keypress",function(e){c()(n,M).call(n,e)}),window.addEventListener("blur",function(){n.stop()}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?n.start():n.stop()}),window.addEventListener("focus",function(){n.start()}),c()(n,A).call(n)}}),A.set(this,{writable:!0,value:function(){c()(n,E).set({title:"MAIN MENU",options:[{text:"Player 1",func:function(){n.field.addSnake(),c()(n,O).call(n)}},{text:"Player 2",func:function(){n.field.addSnake(),n.field.addSnake(),c()(n,O).call(n)}},{text:"Show scores",func:function(){n.field.showScores=!0,c()(n,O).call(n)}}]}),c()(n,E).show()}}),O.set(this,{writable:!0,value:function(){c()(n,E).hide()}}),M.set(this,{writable:!0,value:function(e){switch(e.code){case"Space":switch(c()(n,b)){case w:n.pause();break;case v:n.start()}}}}),W.set(this,{writable:!0,value:function(e){var t=c()(n,I).call(n,e);c()(n,P).call(n,t),c()(n,_).call(n,t),c()(n,N).call(n),c()(n,b)!==k&&u()(n,S,window.requestAnimationFrame(c()(n,W)))}}),I.set(this,{writable:!0,value:function(e){var t=e-c()(n,m);return u()(n,m,e),t}}),P.set(this,{writable:!0,value:function(e){n.field.tick(e),c()(n,E).tick(e)}}),_.set(this,{writable:!0,value:function(e){n.field.draw(e),c()(n,E).draw(e)}}),x.set(this,{writable:!0,value:function(e){return 1<n.field.snakes.length?n.field.killSnake(e):(u()(n,g,!0),n.stop(),c()(n,N).call(n,n.field.gameOver),h.default.checkScore(n.field.snakes[0].score)),!0}}),N.set(this,{writable:!0,value:function(e){e?c()(n,T).push(e):(c()(n,T).forEach(function(e){return e()}),u()(n,T,[]))}}),this.field=e,this.debug=i,u()(this,E,new f.default(this.field.ctx)),c()(this,D).call(this)}return o()(a,[{key:"start",value:function(){c()(this,g)||(u()(this,b,w),c()(this,S)||(u()(this,m,performance.now()),u()(this,S,window.requestAnimationFrame(c()(this,W)))))}},{key:"pause",value:function(){u()(this,b,v)}},{key:"stop",value:function(){window.cancelAnimationFrame(c()(this,S)),u()(this,S,null),u()(this,b,k)}},{key:"cellIntersectingWithObstacles",value:function(e,t){var n=this.field.getCell(t);return n&&!d.default.isFood(n)?c()(this,x).call(this,e):!this.field.endless&&(!!this.coorsOutsideField(t)&&c()(this,x).call(this,e))}},{key:"coorsOutsideField",value:function(e){return e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height}},{key:"isGameOver",get:function(){return c()(this,g)}},{key:"state",get:function(){return c()(this,b)}}]),a}(),g=new WeakMap,S=new WeakMap,b=new WeakMap,m=new WeakMap,T=new WeakMap,E=new WeakMap,D=new WeakMap,A=new WeakMap,O=new WeakMap,M=new WeakMap,W=new WeakMap,I=new WeakMap,P=new WeakMap,_=new WeakMap,x=new WeakMap,N=new WeakMap},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var i=n(2),l=n.n(i),a=n(3),r=n.n(a),o=n(12),c=n.n(o),s=n(13),h=n.n(s),u=n(14),d=n.n(u),f=n(9),p=n.n(f),v=n(10),w=n.n(v),k=function(e){function u(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=i.power,r=void 0===a?1:a,o=i.score,s=void 0===o?100:o;return l()(this,u),n=c()(this,h()(u).call(this,t)),w()(p()(p()(n)),"update",function(){n.hue+=n.hueStep*n.hueDirection,255<n.hue&&(n.hueDirection*=-1,n.hue=255),n.hue<0&&(n.hueDirection*=-1,n.hue=0),n.currentZoom+=n.zoomStep*n.zoomDirection,(n.zoomDirection&&n.currentZoom>=n.zoom||n.zoomDirection&&n.currentZoom<=-n.zoom)&&(n.zoomDirection=-1*n.zoomDirection),n.currentDegree+=n.degreeStep,n.currentDegree>=n.rotate&&(n.currentDegree=0)}),w()(p()(p()(n)),"draw",function(e){e.save(),e.translate(n.coords.x+n.field.cellSize/2,n.coords.y+n.field.cellSize/2),e.rotate(n.currentDegree*Math.PI/180),e.translate(-n.coords.x-n.field.cellSize/2,-n.coords.y-n.field.cellSize/2),e.fillStyle="hsl("+n.hue+",100%,50%)",e.fillRect(n.coords.x-n.currentZoom,n.coords.y-n.currentZoom,n.field.cellSize+2*n.currentZoom,n.field.cellSize+2*n.currentZoom),e.restore()}),n.field=e,n.power=r,n.score=s,n.hue=0,n.hueDirection=1,n.hueStep=3,n.zoom=1,n.currentZoom=0,n.zoomStep=.1,n.zoomDirection=1,n.rotate=360,n.currentDegree=0,n.degreeStep=1,n}return d()(u,e),r()(u,[{key:"consume",value:function(){this.destroy()}},{key:"destroy",value:function(){var n=this,i=null;this.field.food.forEach(function(e,t){e===n&&(i=t)});var e=this.field.food.splice(i,1)[0];this.field.deleteCell(e)}}],[{key:"isFood",value:function(e){return e instanceof u}}]),u}(n(6).default)},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var i=n(2),a=n.n(i),r=n(3),o=n.n(r),s=function(){function r(){a()(this,r)}return o()(r,null,[{key:"checkScore",value:function(i){if(i){var e=r.score,a=e.length?-1:0;e.forEach(function(e,t){var n=e.points;a<0&&n<i&&(a=t)}),r.addScore(i,a)}}},{key:"addScore",value:function(e,t){var n=prompt("Whats your name?");if(n){var i={name:n,points:e,date:new Date},a=r.score;t<0?a.push(i):a.splice(t,0,i),5<a.length&&a.pop(),localStorage.setItem("snaked-score",JSON.stringify(a))}}},{key:"score",get:function(){var e=localStorage.getItem("snaked-score")||"[]",t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t}}]),r}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var i=n(18),r=n.n(i),a=n(2),o=n.n(a),s=n(3),u=n.n(s),l=n(0),c=n.n(l),h=n(1),d=n.n(h),f=n(7),p=function(){function a(e){var t=this,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,i=void 0===n?0:n;o()(this,a),v.set(this,{writable:!0,value:null}),w.set(this,{writable:!0,value:""}),k.set(this,{writable:!0,value:[]}),y.set(this,{writable:!0,value:0}),g.set(this,{writable:!0,value:!1}),S.set(this,{writable:!0,value:0}),b.set(this,{writable:!0,value:0}),m.set(this,{writable:!0,value:1}),T.set(this,{writable:!0,value:1}),E.set(this,{writable:!0,value:function(e){c()(t,y)>=t.animationSpeed&&(d()(t,y,c()(t,y)-t.animationSpeed),e(),c()(t,E).call(t,e))}}),D.set(this,{writable:!0,value:function(){d()(t,b,c()(t,b)+c()(t,T)*c()(t,m)),255<c()(t,b)&&(d()(t,m,-1*c()(t,m)),d()(t,b,255)),c()(t,b)<0&&(d()(t,m,-1*c()(t,m)),d()(t,b,0)),c()(t,k)[c()(t,S)].color="hsl(".concat(c()(t,b),",100%,50%)")}}),d()(this,v,e),this.animationSpeed=i,this.init()}return u()(a,[{key:"init",value:function(){var t=this;window.addEventListener("keypress",function(e){t.keyPress(e)}),window.addEventListener("keydown",function(e){t.keyDown(e)})}},{key:"keyPress",value:function(e){if(c()(this,g))switch(e.code){case"Enter":c()(this,k)[c()(this,S)].func()}}},{key:"keyDown",value:function(e){if(c()(this,g))switch(e.code){case"ArrowUp":d()(this,S,+c()(this,S)-1),c()(this,S)<0&&d()(this,S,c()(this,k).length-1),this.updateOptions();break;case"ArrowDown":d()(this,S,1+ +c()(this,S)),c()(this,S)>c()(this,k).length-1&&d()(this,S,0),this.updateOptions()}}},{key:"set",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.title,i=void 0===t?"":t,a=e.options,r=void 0===a?[]:a;d()(this,w,i),d()(this,k,r),c()(this,k).forEach(function(e,t){e.font=t===c()(n,S)?"bold 12px Arial":"12px Arial",e.color=t===c()(n,S)?"hsl(".concat(c()(n,b),",100%,50%)"):"black",e.height=12,e.paddingBottom=t===c()(n,k).length-1?0:4})}},{key:"updateOptions",value:function(){var n=this;d()(this,b,0),c()(this,k).forEach(function(e,t){t===c()(n,S)?(e.font="bold 12px Arial",e.color="hsl(".concat(c()(n,b),",100%,50%)")):(e.font="12px Arial",e.color="black")})}},{key:"tick",value:function(e){d()(this,y,c()(this,y)+e),this.animationSpeed?c()(this,E).call(this,c()(this,D)):c()(this,D).call(this)}},{key:"draw",value:function(){c()(this,g)&&Object(f.drawText)(c()(this,v),{align:f.DRAWTEXT_ALIGN_CENTER,padding:10,bgcolor:"#ffffff",bgAlpha:.75,lines:[{font:"bold 14px Arial",height:14,text:c()(this,w),paddingBottom:6}].concat(r()(c()(this,k)))})}},{key:"show",value:function(){d()(this,b,0),d()(this,g,!0)}},{key:"hide",value:function(){d()(this,g,!1)}}]),a}(),v=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,g=new WeakMap,S=new WeakMap,b=new WeakMap,m=new WeakMap,T=new WeakMap,E=new WeakMap,D=new WeakMap}]);