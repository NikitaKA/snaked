!function(l){function e(e){for(var t,n,i=e[0],a=e[1],o=e[2],r=0,s=[];r<i.length;r++)n=i[r],c[n]&&s.push(c[n][0]),c[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(l[t]=a[t]);for(d&&d(e);s.length;)s.shift()();return h.push.apply(h,o||[]),u()}function u(){for(var e,t=0;t<h.length;t++){for(var n=h[t],i=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(i=!1)}i&&(h.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},c={12:0,3:0,5:0,7:0,9:0,10:0,13:0},h=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=l,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var d=i;h.push([8,0]),u()}([,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var i=n(2),a=n.n(i),o=n(3),r=n.n(o);function s(e){var t=Math.round(Math.random()*(e.sizeX-1))*e.cellSize,n=Math.round(Math.random()*(e.sizeY-1))*e.cellSize;return new l(t,n)}var l=function(){function n(e,t){a()(this,n),this.x=e,this.y=t}return r()(n,null,[{key:"generate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=s(e),i=null;if(!t)for(;!i;)e.getCell(n)?n=s(e):i=n;return i||n}}]),n}()},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var i=n(2),a=n.n(i),o=n(3),r=n.n(o),s=n(4),l=function(){function i(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,n=void 0===t?0:t;a()(this,i),this.coords=e,this.msPassed=0,this.animationSpeed=n}return r()(i,[{key:"tick",value:function(e){this.msPassed+=e,this.animationSpeed?this.deTick(this.update):this.update()}},{key:"deTick",value:function(e){this.msPassed>=this.animationSpeed&&(this.msPassed=this.msPassed-this.animationSpeed,e(),this.deTick(e))}},{key:"update",value:function(){}}],[{key:"generate",value:function(e){return new i(s.default.generate(e))}}]),i}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DRAWTEXT_ALIGN_CENTER",function(){return r}),n.d(t,"drawText",function(){return i});var r="center";function i(t,e){var n=e.padding||0,i=0,a=0;switch(e.lines.forEach(function(e){t.font=e.font,e.paddingBottom=e.paddingBottom||0,e.width=t.measureText(e.text).width,e.width>i&&(i=e.width),a+=e.height+e.paddingBottom}),t.save(),e.align){case r:t.translate(0,(t.canvas.height-a-2*n)/2),t.fillStyle=e.bgcolor,t.globalAlpha=e.bgAlpha||1,t.fillRect(t.canvas.width/2-i/2-n,0,i+2*n,a+2*n),t.globalAlpha=e.alpha||1;var o=n;e.lines.forEach(function(e){t.textBaseline=e.baseline||"middle",t.fillStyle=e.color||"black",t.font=e.font,t.fillText(e.text,t.canvas.width/2-e.width/2,o+e.height/2),o+=e.height+e.paddingBottom})}t.restore()}},function(e,t,n){"use strict";n.r(t),n.d(t,"STATE_INITIALIZED",function(){return p}),n.d(t,"STATE_PAUSED",function(){return v}),n.d(t,"STATE_RUNNING",function(){return w}),n.d(t,"STATE_STOPPED",function(){return k}),n.d(t,"default",function(){return g});var i=n(2),o=n.n(i),a=n(3),r=n.n(a),s=n(1),l=n.n(s),u=n(0),c=n.n(u),h=n(15),d=n(11),f=n(16),p="STATE_INITIALIZED",v="STATE_PAUSED",w="STATE_RUNNING",k="STATE_STOPPED",g=function(){function a(e){var n=this,t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).debug,i=void 0!==t&&t;o()(this,a),b.set(this,{writable:!0,value:!1}),y.set(this,{writable:!0,value:null}),m.set(this,{writable:!0,value:p}),S.set(this,{writable:!0,value:0}),M.set(this,{writable:!0,value:[]}),E.set(this,{writable:!0,value:null}),T.set(this,{writable:!0,value:function(){n.field.app=n,window.addEventListener("keypress",function(e){c()(n,x).call(n,e)}),window.addEventListener("blur",function(){n.stop()}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?n.start():n.stop()}),window.addEventListener("focus",function(){n.start()}),c()(n,A).call(n)}}),A.set(this,{writable:!0,value:function(){c()(n,E).set({title:"MAIN MENU",options:[{text:"Player 1",func:function(){n.field.addSnake(),c()(n,W).call(n)}},{text:"Player 2",func:function(){n.field.addSnake(),n.field.addSnake(),c()(n,W).call(n)}},{text:"Show scores",func:function(){n.field.showScores=!0,c()(n,W).call(n)}}]}),c()(n,E).show()}}),W.set(this,{writable:!0,value:function(){c()(n,E).hide()}}),x.set(this,{writable:!0,value:function(e){switch(e.code){case"Space":switch(c()(n,m)){case w:n.pause();break;case v:n.start()}}}}),D.set(this,{writable:!0,value:function(e){var t=c()(n,O).call(n,e);c()(n,P).call(n,t),c()(n,z).call(n,t),c()(n,I).call(n),c()(n,m)!==k&&l()(n,y,window.requestAnimationFrame(c()(n,D)))}}),O.set(this,{writable:!0,value:function(e){var t=e-c()(n,S);return l()(n,S,e),t}}),P.set(this,{writable:!0,value:function(e){n.field.tick(e),c()(n,E).tick(e)}}),z.set(this,{writable:!0,value:function(e){n.field.draw(e),c()(n,E).draw(e)}}),_.set(this,{writable:!0,value:function(e){return 1<n.field.snakes.length?n.field.killSnake(e):(l()(n,b,!0),n.stop(),c()(n,I).call(n,n.field.gameOver),h.default.checkScore(n.field.snakes[0].score)),!0}}),I.set(this,{writable:!0,value:function(e){e?c()(n,M).push(e):(c()(n,M).forEach(function(e){return e()}),l()(n,M,[]))}}),this.field=e,this.debug=i,l()(this,E,new f.default(this.field.ctx)),c()(this,T).call(this)}return r()(a,[{key:"start",value:function(){c()(this,b)||(l()(this,m,w),c()(this,y)||(l()(this,S,performance.now()),l()(this,y,window.requestAnimationFrame(c()(this,D)))))}},{key:"pause",value:function(){l()(this,m,v)}},{key:"stop",value:function(){window.cancelAnimationFrame(c()(this,y)),l()(this,y,null),l()(this,m,k)}},{key:"cellIntersectingWithObstacles",value:function(e,t){var n=this.field.getCell(t);return n&&!d.default.isFood(n)?c()(this,_).call(this,e):!this.field.endless&&(!!this.coorsOutsideField(t)&&c()(this,_).call(this,e))}},{key:"coorsOutsideField",value:function(e){return e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height}},{key:"isGameOver",get:function(){return c()(this,b)}},{key:"state",get:function(){return c()(this,m)}}]),a}(),b=new WeakMap,y=new WeakMap,m=new WeakMap,S=new WeakMap,M=new WeakMap,E=new WeakMap,T=new WeakMap,A=new WeakMap,W=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,P=new WeakMap,z=new WeakMap,_=new WeakMap,I=new WeakMap},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var i=n(2),u=n.n(i),a=n(3),o=n.n(a),r=n(12),c=n.n(r),s=n(13),h=n.n(s),l=n(14),d=n.n(l),f=n(9),p=n.n(f),v=n(10),w=n.n(v),k=function(e){function l(e,t){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=i.power,o=void 0===a?1:a,r=i.score,s=void 0===r?100:r;return u()(this,l),n=c()(this,h()(l).call(this,t)),w()(p()(p()(n)),"update",function(){n.hue+=n.hueStep*n.hueDirection,255<n.hue&&(n.hueDirection*=-1,n.hue=255),n.hue<0&&(n.hueDirection*=-1,n.hue=0),n.currentZoom+=n.zoomStep*n.zoomDirection,(n.zoomDirection&&n.currentZoom>=n.zoom||n.zoomDirection&&n.currentZoom<=-n.zoom)&&(n.zoomDirection=-1*n.zoomDirection),n.currentDegree+=n.degreeStep,n.currentDegree>=n.rotate&&(n.currentDegree=0)}),w()(p()(p()(n)),"draw",function(e){e.save(),e.translate(n.coords.x+n.field.cellSize/2,n.coords.y+n.field.cellSize/2),e.rotate(n.currentDegree*Math.PI/180),e.translate(-n.coords.x-n.field.cellSize/2,-n.coords.y-n.field.cellSize/2),e.fillStyle="hsl("+n.hue+",100%,50%)",e.fillRect(n.coords.x-n.currentZoom,n.coords.y-n.currentZoom,n.field.cellSize+2*n.currentZoom,n.field.cellSize+2*n.currentZoom),e.restore()}),n.field=e,n.power=o,n.score=s,n.hue=0,n.hueDirection=1,n.hueStep=3,n.zoom=1,n.currentZoom=0,n.zoomStep=.1,n.zoomDirection=1,n.rotate=360,n.currentDegree=0,n.degreeStep=1,n}return d()(l,e),o()(l,[{key:"consume",value:function(){this.destroy()}},{key:"destroy",value:function(){var n=this,i=null;this.field.food.forEach(function(e,t){e===n&&(i=t)});var e=this.field.food.splice(i,1)[0];this.field.deleteCell(e)}}],[{key:"isFood",value:function(e){return e instanceof l}}]),l}(n(6).default)},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var i=n(2),a=n.n(i),o=n(3),r=n.n(o),s=function(){function o(){a()(this,o)}return r()(o,null,[{key:"checkScore",value:function(i){if(i){var e=o.score,a=e.length?-1:0;e.forEach(function(e,t){var n=e.points;a<0&&n<i&&(a=t)}),o.addScore(i,a)}}},{key:"addScore",value:function(e,t){var n=prompt("Whats your name?");if(n){var i={name:n,points:e,date:new Date},a=o.score;t<0?a.push(i):a.splice(t,0,i),5<a.length&&a.pop(),localStorage.setItem("snaked-score",JSON.stringify(a))}}},{key:"score",get:function(){var e=localStorage.getItem("snaked-score")||"[]",t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t}}]),o}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var i=n(18),o=n.n(i),a=n(2),r=n.n(a),s=n(3),l=n.n(s),u=n(0),c=n.n(u),h=n(1),d=n.n(h),f=n(7),p=function(){function a(e){var t=this,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,i=void 0===n?0:n;r()(this,a),v.set(this,{writable:!0,value:null}),w.set(this,{writable:!0,value:""}),k.set(this,{writable:!0,value:[]}),g.set(this,{writable:!0,value:0}),b.set(this,{writable:!0,value:!1}),y.set(this,{writable:!0,value:0}),m.set(this,{writable:!0,value:0}),S.set(this,{writable:!0,value:1}),M.set(this,{writable:!0,value:1}),E.set(this,{writable:!0,value:function(e){c()(t,g)>=t.animationSpeed&&(d()(t,g,c()(t,g)-t.animationSpeed),e(),c()(t,E).call(t,e))}}),T.set(this,{writable:!0,value:function(){d()(t,m,c()(t,m)+c()(t,M)*c()(t,S)),255<c()(t,m)&&(d()(t,S,-1*c()(t,S)),d()(t,m,255)),c()(t,m)<0&&(d()(t,S,-1*c()(t,S)),d()(t,m,0)),c()(t,k)[c()(t,y)].color="hsl(".concat(c()(t,m),",100%,50%)")}}),d()(this,v,e),this.animationSpeed=i,this.init()}return l()(a,[{key:"init",value:function(){var t=this;window.addEventListener("keypress",function(e){t.keyPress(e)}),window.addEventListener("keydown",function(e){t.keyDown(e)})}},{key:"keyPress",value:function(e){if(c()(this,b))switch(e.code){case"Enter":c()(this,k)[c()(this,y)].func()}}},{key:"keyDown",value:function(e){if(c()(this,b))switch(e.code){case"ArrowUp":d()(this,y,+c()(this,y)-1),c()(this,y)<0&&d()(this,y,c()(this,k).length-1),this.updateOptions();break;case"ArrowDown":d()(this,y,1+ +c()(this,y)),c()(this,y)>c()(this,k).length-1&&d()(this,y,0),this.updateOptions()}}},{key:"set",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.title,i=void 0===t?"":t,a=e.options,o=void 0===a?[]:a;d()(this,w,i),d()(this,k,o),c()(this,k).forEach(function(e,t){e.font=t===c()(n,y)?"bold 12px Arial":"12px Arial",e.color=t===c()(n,y)?"hsl(".concat(c()(n,m),",100%,50%)"):"black",e.height=12,e.paddingBottom=t===c()(n,k).length-1?0:4})}},{key:"updateOptions",value:function(){var n=this;d()(this,m,0),c()(this,k).forEach(function(e,t){t===c()(n,y)?(e.font="bold 12px Arial",e.color="hsl(".concat(c()(n,m),",100%,50%)")):(e.font="12px Arial",e.color="black")})}},{key:"tick",value:function(e){d()(this,g,c()(this,g)+e),this.animationSpeed?c()(this,E).call(this,c()(this,T)):c()(this,T).call(this)}},{key:"draw",value:function(){c()(this,b)&&Object(f.drawText)(c()(this,v),{align:f.DRAWTEXT_ALIGN_CENTER,padding:10,bgcolor:"#ffffff",bgAlpha:.75,lines:[{font:"bold 14px Arial",height:14,text:c()(this,w),paddingBottom:6}].concat(o()(c()(this,k)))})}},{key:"show",value:function(){d()(this,m,0),d()(this,b,!0)}},{key:"hide",value:function(){d()(this,b,!1)}}]),a}(),v=new WeakMap,w=new WeakMap,k=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,m=new WeakMap,S=new WeakMap,M=new WeakMap,E=new WeakMap,T=new WeakMap}]);