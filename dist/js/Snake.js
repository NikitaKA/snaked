!function(e){function t(t){for(var i,o,a=t[0],u=t[1],c=t[2],h=0,l=[];h<a.length;h++)o=a[h],r[o]&&l.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);for(d&&d(t);l.length;)l.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={10:0,2:0,3:0,4:0,5:0,7:0,9:0,11:0},s=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=u;s.push([15,0]),n()}([,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var i=n(0),r=n.n(i),s=n(1),o=n.n(s);function a(e){var t=Math.round(Math.random()*(e.size.x-1))*e.cellSize,n=Math.round(Math.random()*(e.size.y-1))*e.cellSize;return new u(t,n)}var u=function(){function e(t,n){r()(this,e),this.x=t,this.y=n}return o()(e,null,[{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a(e.field),i=null;if(!t)for(;!i;)e.coordsIntersectingWithSnakes(n)?n=a(e.field):i=n;return i||n}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"STATE_INITIALIZED",function(){return h}),n.d(t,"STATE_PAUSED",function(){return l}),n.d(t,"STATE_RUNNING",function(){return f}),n.d(t,"STATE_STOPPED",function(){return p}),n.d(t,"default",function(){return v});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(7),u=n.n(a),c=n(11),d=n(6),h="STATE_INITIALIZED",l="STATE_PAUSED",f="STATE_RUNNING",p="STATE_STOPPED",v=function(){function e(t,n){var i=this,s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).debug,o=void 0!==s&&s;r()(this,e),u()(this,"tick",function(e){var t=i.setDelta(e);i.update(t),i.render(t),i.onTickEnd(),i.state!==p&&(i.reqAnimationFrame=window.requestAnimationFrame(i.tick))}),this.field=t,this.controls=n,this.snakes=[],this.state=h,this.reqAnimationFrame=null,this.debug=o,this.then=0,this.started=!1,this.gameover=!1,this.onTickEndCallbacks=[],this.food=[],this.field.app=this,this.controls.app=this}return o()(e,[{key:"start",value:function(){this.gameover||(this.state===h&&(this.field.addSnakes(this.snakes),this.snakes.forEach(function(e){return e.spawn()})),this.state=f,this.reqAnimationFrame||(this.then=performance.now(),this.reqAnimationFrame=window.requestAnimationFrame(this.tick)))}},{key:"pause",value:function(){this.state=l}},{key:"stop",value:function(){window.cancelAnimationFrame(this.reqAnimationFrame),this.reqAnimationFrame=null,this.state=p}},{key:"meetSnake",value:function(e){e.app=this,e.field=this.field,e.controls=this.controls,this.snakes.push(e)}},{key:"setDelta",value:function(e){var t=e-this.then;return this.then=e,t}},{key:"update",value:function(e){this.generateFood(),this.snakes.forEach(function(t){return t.tick(e)})}},{key:"render",value:function(e){this.field.draw(e)}},{key:"generateFood",value:function(){if(!this.food.length){var e=new c.default(this);this.food.push(e)}}},{key:"cellIntersectingWithObstacles",value:function(e){return this.coordsIntersectingWithSnakes(e)?this.gameOver():!this.field.endless&&(!!this.coorsOutsideField(e)&&this.gameOver())}},{key:"gameOver",value:function(){return this.gameover=!0,this.stop(),this.onTickEnd(this.field.gameOver),d.default.checkScore(this.snakes[0].score),!0}},{key:"onTickEnd",value:function(e){e?this.onTickEndCallbacks.push(e):(this.onTickEndCallbacks.forEach(function(e){return e()}),this.onTickEndCallbacks=[])}},{key:"coorsOutsideField",value:function(e){return e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height}},{key:"coordsIntersectingWithSnakes",value:function(e){var t=!1;return this.snakes.forEach(function(n){t||n.body.forEach(function(n){e.x===n.coords.x&&e.y===n.coords.y&&(t=!0)})}),t}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DIRECTION_LEFT",function(){return u}),n.d(t,"DIRECTION_RIGHT",function(){return c}),n.d(t,"DIRECTION_UP",function(){return d}),n.d(t,"DIRECTION_DOWN",function(){return h}),n.d(t,"default",function(){return l});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(3),u="DIRECTION_LEFT",c="DIRECTION_RIGHT",d="DIRECTION_UP",h="DIRECTION_DOWN",l=function(){function e(){r()(this,e),this.app=null,this.direction=null,this.keysPressed={},this.init()}return o()(e,[{key:"init",value:function(){var e=this;window.addEventListener("keydown",function(t){if(e.app.state===a.STATE_PAUSED||e.app.state===a.STATE_STOPPED)return!1;e.keyDown(t)}),window.addEventListener("keyup",function(t){if(e.app.state===a.STATE_PAUSED||e.app.state===a.STATE_STOPPED)return!1;e.keyUp(t)}),window.addEventListener("keypress",function(t){e.appControl(t)}),window.addEventListener("blur",function(){e.app.stop()}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?e.app.start():e.app.stop()}),window.addEventListener("focus",function(){e.app.start()})}},{key:"appControl",value:function(e){switch(e.code){case"Space":switch(this.app.state){case a.STATE_RUNNING:this.app.pause();break;case a.STATE_PAUSED:this.app.start()}break;case"Enter":this.app.state===a.STATE_STOPPED?this.app.start():this.app.stop()}}},{key:"keyDown",value:function(e){this.keysPressed[e.code]=performance.now(),this.selectDirection()}},{key:"keyUp",value:function(e){this.keysPressed[e.code]=0,this.selectDirection()}},{key:"selectDirection",value:function(){var e=this,t=null,n=0;switch(Object.keys(this.keysPressed).forEach(function(i){var r=e.keysPressed[i];(!n&&r||n&&r&&r>n)&&(t=i,n=r)}),t){case"ArrowLeft":this.direction=u;break;case"ArrowRight":this.direction=c;break;case"ArrowUp":this.direction=d;break;case"ArrowDown":this.direction=h}}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(2),u=function(){function e(t){r()(this,e),this.coords=t}return o()(e,null,[{key:"generate",value:function(t){return new e(a.default.generate(t))}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=function(){function e(){r()(this,e)}return o()(e,null,[{key:"checkScore",value:function(t){if(t){var n=e.score,i=n.length?-1:0;n.forEach(function(e,n){var r=e.points;i<0&&t>r&&(i=n)}),e.addScore(t,i)}}},{key:"addScore",value:function(t,n){var i,r=prompt("Whats your name?");if(r){var s={name:r,points:t,date:new Date},o=e.score;n<0?o.push(s):o.splice(n,0,s),o.length>10&&o.pop(),localStorage.setItem("snaked-score",(i=o,JSON.stringify(i)))}}},{key:"score",get:function(){var e=localStorage.getItem("snaked-score")||"[]",t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t}}]),e}()},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(8),u=n.n(a),c=n(9),d=n.n(c),h=n(10),l=n.n(h),f=n(2),p=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.coords,o=void 0===s?f.default.generate(e):s,a=i.power,c=void 0===a?1:a,h=i.score,l=void 0===h?100:h;return r()(this,t),(n=u()(this,d()(t).call(this,o))).app=e,n.power=c,n.score=l,n}return l()(t,e),o()(t,[{key:"destroy",value:function(){var e=this,t=null;this.app.food.forEach(function(n,i){n===e&&(t=i)}),this.app.food.splice(t,1)}}]),t}(n(5).default)},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var i=n(0),r=n.n(i),s=n(8),o=n.n(s),a=n(9),u=n.n(a),c=n(10),d=n.n(c),h=function(e){function t(){return r()(this,t),o()(this,u()(t).apply(this,arguments))}return d()(t,e),t}(n(5).default)},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var i=n(0),r=n.n(i),s=n(1),o=n.n(s),a=n(7),u=n.n(a),c=n(16),d=n.n(c),h=n(3),l=n(4),f=n(2),p=n(13),v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.speed,s=void 0===i?5:i,o=n.toGrow,a=void 0===o?2:o;r()(this,e),u()(this,"move",function(){if(t.app.state!==h.STATE_RUNNING)return!1;var e=t.head.coords,n=e.x,i=e.y,r=null,s=t.checkReverse()?t.direction:t.controls.direction;switch(s){case l.DIRECTION_LEFT:r=new f.default(n-t.field.cellSize,i);break;case l.DIRECTION_RIGHT:r=new f.default(n+t.field.cellSize,i);break;case l.DIRECTION_UP:r=new f.default(n,i-t.field.cellSize);break;case l.DIRECTION_DOWN:r=new f.default(n,i+t.field.cellSize)}if(t.controls.direction&&(t.app.started||(t.app.started=!0),!t.app.cellIntersectingWithObstacles(r))){var o=t.sideTravel(r);t.direction=s,t.eat(o)}}),this.app=null,this.field=null,this.controls=null,this.body=[],this.baseSpeed=200-10*(s-1),this.minimumSpeed=20,this.direction=null,this.passed=0,this.toGrow=a,this.consumed=0,this.score=0,this.speedEasing=d()(.25,.46,.45,.94)}return o()(e,[{key:"tick",value:function(e){this.passed+=e,this.deTick(this.move)}},{key:"deTick",value:function(e){this.passed>=this.speed&&(this.passed=this.passed-this.speed,e(),this.deTick(e))}},{key:"spawn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!=e&&null!=t?new f.default(e,t):f.default.generate(this.app);this.body.push(new p.default(n))}},{key:"checkReverse",value:function(){return this.direction===l.DIRECTION_LEFT&&this.controls.direction===l.DIRECTION_RIGHT||this.direction===l.DIRECTION_RIGHT&&this.controls.direction===l.DIRECTION_LEFT||this.direction===l.DIRECTION_UP&&this.controls.direction===l.DIRECTION_DOWN||this.direction===l.DIRECTION_DOWN&&this.controls.direction===l.DIRECTION_UP}},{key:"addBody",value:function(e){this.body.unshift(new p.default(e))}},{key:"eat",value:function(e){this.addBody(e),this.feed(e)}},{key:"feed",value:function(e){var t=this.checkFoodInCoords(e);t&&(this.consumed++,this.score+=t.score,this.toGrow=t.power,t.destroy()),this.tailTrimmer()}},{key:"tailTrimmer",value:function(){if(this.toGrow)return this.toGrow--,!1;this.body.pop()}},{key:"checkFoodInCoords",value:function(e){var t=null;return this.app.food.forEach(function(n){t||n.coords.x===e.x&&n.coords.y===e.y&&(t=n)}),t}},{key:"sideTravel",value:function(e){var t,n,i=null;(e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height)&&(e.x<0&&(t=this.field.width-this.field.cellSize),e.y<0&&(n=this.field.height-this.field.cellSize),e.x>=this.field.width&&(t=0),e.y>=this.field.height&&(n=0),i=new f.default(t,n));return i||e}},{key:"speed",get:function(){var e=this.baseSpeed;if(this.consumed){var t=this.speedEasing(this.consumed/50);e=Math.round(this.baseSpeed-(this.baseSpeed-this.minimumSpeed)*t)}return e}},{key:"size",get:function(){return this.body.length}},{key:"head",get:function(){return this.body[0]}}]),e}()}]);