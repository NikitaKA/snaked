!function(l){function e(e){for(var t,i,n=e[0],s=e[1],o=e[2],r=0,a=[];r<n.length;r++)i=n[r],c[i]&&a.push(c[i][0]),c[i]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(l[t]=s[t]);for(d&&d(e);a.length;)a.shift()();return h.push.apply(h,o||[]),u()}function u(){for(var e,t=0;t<h.length;t++){for(var i=h[t],n=!0,s=1;s<i.length;s++){var o=i[s];0!==c[o]&&(n=!1)}n&&(h.splice(t--,1),e=r(r.s=i[0]))}return e}var i={},c={11:0,2:0,3:0,4:0,5:0,7:0,9:0,10:0,12:0,13:0},h=[];function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=l,r.c=i,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var s=0;s<t.length;s++)e(t[s]);var d=n;h.push([19,0]),u()}([,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return l});var n=i(2),s=i.n(n),o=i(3),r=i.n(o);function a(e){var t=Math.round(Math.random()*(e.sizeX-1))*e.cellSize,i=Math.round(Math.random()*(e.sizeY-1))*e.cellSize;return new l(t,i)}var l=function(){function i(e,t){s()(this,i),this.x=e,this.y=t}return r()(i,null,[{key:"generate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=a(e),n=null;if(!t)for(;!n;)e.getCell(i)?i=a(e):n=i;return n||i}}]),i}()},function(e,t,i){"use strict";i.r(t),i.d(t,"DIRECTION_LEFT",function(){return u}),i.d(t,"DIRECTION_RIGHT",function(){return c}),i.d(t,"DIRECTION_UP",function(){return h}),i.d(t,"DIRECTION_DOWN",function(){return d}),i.d(t,"CONTROLS_ARROWS",function(){return f}),i.d(t,"CONTROLS_WSAD",function(){return r}),i.d(t,"default",function(){return p});var n=i(2),a=i.n(n),s=i(3),o=i.n(s),l=i(8),u="DIRECTION_LEFT",c="DIRECTION_RIGHT",h="DIRECTION_UP",d="DIRECTION_DOWN",f={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},r={left:"KeyA",right:"KeyD",up:"KeyW",down:"KeyS"},p=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,i=t.left,n=t.right,s=t.up,o=t.down;a()(this,r),this.app=e,this.direction=null,this.keysPressed={},this.kLeft=i,this.kRight=n,this.kUp=s,this.kDown=o,this.init()}return o()(r,[{key:"init",value:function(){var t=this;window.addEventListener("keydown",function(e){if(t.app.state===l.STATE_PAUSED||t.app.state===l.STATE_STOPPED)return!1;t.keyDown(e)}),window.addEventListener("keyup",function(e){if(t.app.state===l.STATE_PAUSED||t.app.state===l.STATE_STOPPED)return!1;t.keyUp(e)})}},{key:"keyDown",value:function(e){this.keysPressed[e.code]=performance.now(),this.selectDirection()}},{key:"keyUp",value:function(e){this.keysPressed[e.code]=0,this.selectDirection()}},{key:"selectDirection",value:function(){var i=this,n=null,s=0;switch(Object.keys(this.keysPressed).forEach(function(e){var t=i.keysPressed[e];(!s&&t||s&&t&&s<t)&&(n=e,s=t)}),n){case this.kLeft:this.direction=u;break;case this.kRight:this.direction=c;break;case this.kUp:this.direction=h;break;case this.kDown:this.direction=d}}}]),r}()},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return l});var n=i(2),s=i.n(n),o=i(3),r=i.n(o),a=i(4),l=function(){function n(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,i=void 0===t?0:t;s()(this,n),this.coords=e,this.msPassed=0,this.animationSpeed=i}return r()(n,[{key:"tick",value:function(e){this.msPassed+=e,this.animationSpeed?this.deTick(this.update):this.update()}},{key:"deTick",value:function(e){this.msPassed>=this.animationSpeed&&(this.msPassed=this.msPassed-this.animationSpeed,e(),this.deTick(e))}},{key:"update",value:function(){}}],[{key:"generate",value:function(e){return new n(a.default.generate(e))}}]),n}()},function(e,t,i){"use strict";i.r(t),i.d(t,"DRAWTEXT_ALIGN_CENTER",function(){return r}),i.d(t,"drawText",function(){return n});var r="center";function n(t,e){var i=e.padding||0,n=0,s=0;switch(e.lines.forEach(function(e){t.font=e.font,e.paddingBottom=e.paddingBottom||0,e.width=t.measureText(e.text).width,e.width>n&&(n=e.width),s+=e.height+e.paddingBottom}),t.save(),e.align){case r:t.translate(0,(t.canvas.height-s-2*i)/2),t.fillStyle=e.bgcolor,t.globalAlpha=e.bgAlpha||1,t.fillRect(t.canvas.width/2-n/2-i,0,n+2*i,s+2*i),t.globalAlpha=e.alpha||1;var o=i;e.lines.forEach(function(e){t.textBaseline=e.baseline||"middle",t.fillStyle=e.color||"black",t.font=e.font,t.fillText(e.text,t.canvas.width/2-e.width/2,o+e.height/2),o+=e.height+e.paddingBottom})}t.restore()}},function(e,t,i){"use strict";i.r(t),i.d(t,"STATE_INITIALIZED",function(){return p}),i.d(t,"STATE_PAUSED",function(){return v}),i.d(t,"STATE_RUNNING",function(){return w}),i.d(t,"STATE_STOPPED",function(){return k}),i.d(t,"default",function(){return y});var n=i(2),o=i.n(n),s=i(3),r=i.n(s),a=i(1),l=i.n(a),u=i(0),c=i.n(u),h=i(15),d=i(11),f=i(16),p="STATE_INITIALIZED",v="STATE_PAUSED",w="STATE_RUNNING",k="STATE_STOPPED",y=function(){function s(e){var i=this,t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).debug,n=void 0!==t&&t;o()(this,s),g.set(this,{writable:!0,value:!1}),b.set(this,{writable:!0,value:null}),S.set(this,{writable:!0,value:p}),T.set(this,{writable:!0,value:0}),m.set(this,{writable:!0,value:[]}),E.set(this,{writable:!0,value:null}),D.set(this,{writable:!0,value:function(){i.field.app=i,window.addEventListener("keypress",function(e){c()(i,N).call(i,e)}),window.addEventListener("blur",function(){i.stop()}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?i.start():i.stop()}),window.addEventListener("focus",function(){i.start()}),c()(i,I).call(i)}}),I.set(this,{writable:!0,value:function(){c()(i,E).set({title:"MAIN MENU",options:[{text:"Player 1",func:function(){i.field.addSnake(),c()(i,O).call(i)}},{text:"Player 2",func:function(){i.field.addSnake(),i.field.addSnake(),c()(i,O).call(i)}},{text:"Show scores",func:function(){i.field.showScores=!0,c()(i,O).call(i)}}]}),c()(i,E).show()}}),O.set(this,{writable:!0,value:function(){c()(i,E).hide()}}),N.set(this,{writable:!0,value:function(e){switch(e.code){case"Space":switch(c()(i,S)){case w:i.pause();break;case v:i.start()}}}}),A.set(this,{writable:!0,value:function(e){var t=c()(i,_).call(i,e);c()(i,R).call(i,t),c()(i,W).call(i,t),c()(i,P).call(i),c()(i,S)!==k&&l()(i,b,window.requestAnimationFrame(c()(i,A)))}}),_.set(this,{writable:!0,value:function(e){var t=e-c()(i,T);return l()(i,T,e),t}}),R.set(this,{writable:!0,value:function(e){i.field.tick(e),c()(i,E).tick(e)}}),W.set(this,{writable:!0,value:function(e){i.field.draw(e),c()(i,E).draw(e)}}),M.set(this,{writable:!0,value:function(e){return 1<i.field.snakes.length?i.field.killSnake(e):(l()(i,g,!0),i.stop(),c()(i,P).call(i,i.field.gameOver),h.default.checkScore(i.field.snakes[0].score)),!0}}),P.set(this,{writable:!0,value:function(e){e?c()(i,m).push(e):(c()(i,m).forEach(function(e){return e()}),l()(i,m,[]))}}),this.field=e,this.debug=n,l()(this,E,new f.default(this.field.ctx)),c()(this,D).call(this)}return r()(s,[{key:"start",value:function(){c()(this,g)||(l()(this,S,w),c()(this,b)||(l()(this,T,performance.now()),l()(this,b,window.requestAnimationFrame(c()(this,A)))))}},{key:"pause",value:function(){l()(this,S,v)}},{key:"stop",value:function(){window.cancelAnimationFrame(c()(this,b)),l()(this,b,null),l()(this,S,k)}},{key:"cellIntersectingWithObstacles",value:function(e,t){var i=this.field.getCell(t);return i&&!d.default.isFood(i)?c()(this,M).call(this,e):!this.field.endless&&(!!this.coorsOutsideField(t)&&c()(this,M).call(this,e))}},{key:"coorsOutsideField",value:function(e){return e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height}},{key:"isGameOver",get:function(){return c()(this,g)}},{key:"state",get:function(){return c()(this,S)}}]),s}(),g=new WeakMap,b=new WeakMap,S=new WeakMap,T=new WeakMap,m=new WeakMap,E=new WeakMap,D=new WeakMap,I=new WeakMap,O=new WeakMap,N=new WeakMap,A=new WeakMap,_=new WeakMap,R=new WeakMap,W=new WeakMap,M=new WeakMap,P=new WeakMap},,,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return k});var n=i(2),u=i.n(n),s=i(3),o=i.n(s),r=i(12),c=i.n(r),a=i(13),h=i.n(a),l=i(14),d=i.n(l),f=i(9),p=i.n(f),v=i(10),w=i.n(v),k=function(e){function l(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=n.power,o=void 0===s?1:s,r=n.score,a=void 0===r?100:r;return u()(this,l),i=c()(this,h()(l).call(this,t)),w()(p()(p()(i)),"update",function(){i.hue+=i.hueStep*i.hueDirection,255<i.hue&&(i.hueDirection*=-1,i.hue=255),i.hue<0&&(i.hueDirection*=-1,i.hue=0),i.currentZoom+=i.zoomStep*i.zoomDirection,(i.zoomDirection&&i.currentZoom>=i.zoom||i.zoomDirection&&i.currentZoom<=-i.zoom)&&(i.zoomDirection=-1*i.zoomDirection),i.currentDegree+=i.degreeStep,i.currentDegree>=i.rotate&&(i.currentDegree=0)}),w()(p()(p()(i)),"draw",function(e){e.save(),e.translate(i.coords.x+i.field.cellSize/2,i.coords.y+i.field.cellSize/2),e.rotate(i.currentDegree*Math.PI/180),e.translate(-i.coords.x-i.field.cellSize/2,-i.coords.y-i.field.cellSize/2),e.fillStyle="hsl("+i.hue+",100%,50%)",e.fillRect(i.coords.x-i.currentZoom,i.coords.y-i.currentZoom,i.field.cellSize+2*i.currentZoom,i.field.cellSize+2*i.currentZoom),e.restore()}),i.field=e,i.power=o,i.score=a,i.hue=0,i.hueDirection=1,i.hueStep=3,i.zoom=1,i.currentZoom=0,i.zoomStep=.1,i.zoomDirection=1,i.rotate=360,i.currentDegree=0,i.degreeStep=1,i}return d()(l,e),o()(l,[{key:"consume",value:function(){this.destroy()}},{key:"destroy",value:function(){var i=this,n=null;this.field.food.forEach(function(e,t){e===i&&(n=t)});var e=this.field.food.splice(n,1)[0];this.field.deleteCell(e)}}],[{key:"isFood",value:function(e){return e instanceof l}}]),l}(i(6).default)},,,,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return a});var n=i(2),s=i.n(n),o=i(3),r=i.n(o),a=function(){function o(){s()(this,o)}return r()(o,null,[{key:"checkScore",value:function(n){if(n){var e=o.score,s=e.length?-1:0;e.forEach(function(e,t){var i=e.points;s<0&&i<n&&(s=t)}),o.addScore(n,s)}}},{key:"addScore",value:function(e,t){var i=prompt("Whats your name?");if(i){var n={name:i,points:e,date:new Date},s=o.score;t<0?s.push(n):s.splice(t,0,n),5<s.length&&s.pop(),localStorage.setItem("snaked-score",JSON.stringify(s))}}},{key:"score",get:function(){var e=localStorage.getItem("snaked-score")||"[]",t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t}}]),o}()},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return p});var n=i(18),o=i.n(n),s=i(2),r=i.n(s),a=i(3),l=i.n(a),u=i(0),c=i.n(u),h=i(1),d=i.n(h),f=i(7),p=function(){function s(e){var t=this,i=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,n=void 0===i?0:i;r()(this,s),v.set(this,{writable:!0,value:null}),w.set(this,{writable:!0,value:""}),k.set(this,{writable:!0,value:[]}),y.set(this,{writable:!0,value:0}),g.set(this,{writable:!0,value:!1}),b.set(this,{writable:!0,value:0}),S.set(this,{writable:!0,value:0}),T.set(this,{writable:!0,value:1}),m.set(this,{writable:!0,value:1}),E.set(this,{writable:!0,value:function(e){c()(t,y)>=t.animationSpeed&&(d()(t,y,c()(t,y)-t.animationSpeed),e(),c()(t,E).call(t,e))}}),D.set(this,{writable:!0,value:function(){d()(t,S,c()(t,S)+c()(t,m)*c()(t,T)),255<c()(t,S)&&(d()(t,T,-1*c()(t,T)),d()(t,S,255)),c()(t,S)<0&&(d()(t,T,-1*c()(t,T)),d()(t,S,0)),c()(t,k)[c()(t,b)].color="hsl(".concat(c()(t,S),",100%,50%)")}}),d()(this,v,e),this.animationSpeed=n,this.init()}return l()(s,[{key:"init",value:function(){var t=this;window.addEventListener("keypress",function(e){t.keyPress(e)}),window.addEventListener("keydown",function(e){t.keyDown(e)})}},{key:"keyPress",value:function(e){if(c()(this,g))switch(e.code){case"Enter":c()(this,k)[c()(this,b)].func()}}},{key:"keyDown",value:function(e){if(c()(this,g))switch(e.code){case"ArrowUp":d()(this,b,+c()(this,b)-1),c()(this,b)<0&&d()(this,b,c()(this,k).length-1),this.updateOptions();break;case"ArrowDown":d()(this,b,1+ +c()(this,b)),c()(this,b)>c()(this,k).length-1&&d()(this,b,0),this.updateOptions()}}},{key:"set",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"":t,s=e.options,o=void 0===s?[]:s;d()(this,w,n),d()(this,k,o),c()(this,k).forEach(function(e,t){e.font=t===c()(i,b)?"bold 12px Arial":"12px Arial",e.color=t===c()(i,b)?"hsl(".concat(c()(i,S),",100%,50%)"):"black",e.height=12,e.paddingBottom=t===c()(i,k).length-1?0:4})}},{key:"updateOptions",value:function(){var i=this;d()(this,S,0),c()(this,k).forEach(function(e,t){t===c()(i,b)?(e.font="bold 12px Arial",e.color="hsl(".concat(c()(i,S),",100%,50%)")):(e.font="12px Arial",e.color="black")})}},{key:"tick",value:function(e){d()(this,y,c()(this,y)+e),this.animationSpeed?c()(this,E).call(this,c()(this,D)):c()(this,D).call(this)}},{key:"draw",value:function(){c()(this,g)&&Object(f.drawText)(c()(this,v),{align:f.DRAWTEXT_ALIGN_CENTER,padding:10,bgcolor:"#ffffff",bgAlpha:.75,lines:[{font:"bold 14px Arial",height:14,text:c()(this,w),paddingBottom:6}].concat(o()(c()(this,k)))})}},{key:"show",value:function(){d()(this,S,0),d()(this,g,!0)}},{key:"hide",value:function(){d()(this,g,!1)}}]),s}(),v=new WeakMap,w=new WeakMap,k=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,S=new WeakMap,T=new WeakMap,m=new WeakMap,E=new WeakMap,D=new WeakMap},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return f});var n=i(2),s=i.n(n),o=i(3),r=i.n(o),a=i(12),l=i.n(a),u=i(13),c=i.n(u),h=i(14),d=i.n(h),f=function(e){function n(e,t){var i;return s()(this,n),(i=l()(this,c()(n).call(this,t))).snake=e,i}return d()(n,e),r()(n,null,[{key:"isBody",value:function(e){return e instanceof n}}]),n}(i(6).default)},,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return c});var n=i(2),d=i.n(n),s=i(3),o=i.n(s),r=i(10),f=i.n(r),a=i(21),p=i.n(a),v=i(8),w=i(5),k=i(4),l=i(17),u=i(11),c=function(){function h(e,t,i){var r=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=n.speed,o=void 0===s?5:s,a=n.toGrow,l=void 0===a?2:a,u=n.color,c=void 0===u?"black":u;d()(this,h),f()(this,"move",function(){if(r.app.state!==v.STATE_RUNNING)return!1;var e=r.head.coords,t=e.x,i=e.y,n=null,s=r.checkReverse()?r.direction:r.controls.direction;switch(s){case w.DIRECTION_LEFT:n=new k.default(t-r.field.cellSize,i);break;case w.DIRECTION_RIGHT:n=new k.default(t+r.field.cellSize,i);break;case w.DIRECTION_UP:n=new k.default(t,i-r.field.cellSize);break;case w.DIRECTION_DOWN:n=new k.default(t,i+r.field.cellSize)}if(r.controls.direction&&!r.app.cellIntersectingWithObstacles(r,n)){var o=r.sideTravel(n);r.direction=s,r.eat(o)}}),this.app=e,this.field=t,this.controls=i,this.body=[],this.baseSpeed=200-10*(o-1),this.minimumSpeed=20,this.direction=null,this.passed=0,this.toGrow=l,this.consumed=0,this.score=0,this.color=c,this.speedEasing=p()(.25,.46,.45,.94)}return o()(h,[{key:"tick",value:function(e){this.passed+=e,this.deTick(this.move)}},{key:"deTick",value:function(e){this.passed>=this.speed&&(this.passed=this.passed-this.speed,e(),this.deTick(e))}},{key:"spawn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=null!=e&&null!=t?new k.default(e,t):k.default.generate(this.field),n=new l.default(this,i);this.body.push(n),this.field.writeCell(n)}},{key:"checkReverse",value:function(){return this.direction===w.DIRECTION_LEFT&&this.controls.direction===w.DIRECTION_RIGHT||this.direction===w.DIRECTION_RIGHT&&this.controls.direction===w.DIRECTION_LEFT||this.direction===w.DIRECTION_UP&&this.controls.direction===w.DIRECTION_DOWN||this.direction===w.DIRECTION_DOWN&&this.controls.direction===w.DIRECTION_UP}},{key:"addBody",value:function(e){var t=new l.default(this,e);this.body.unshift(t),this.field.writeCell(t),this.tailTrimmer()}},{key:"eat",value:function(e){this.feed(e),this.addBody(e)}},{key:"feed",value:function(e){var t=this.field.getCell(e);u.default.isFood(t)&&(this.consumed++,this.score+=t.score,this.toGrow=t.power,t.consume())}},{key:"tailTrimmer",value:function(){if(this.toGrow)return this.toGrow--,!1;var e=this.body.pop();this.field.deleteCell(e)}},{key:"sideTravel",value:function(e){var t,i,n=null;(e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height)&&(e.x<0&&(t=this.field.width-this.field.cellSize),e.y<0&&(i=this.field.height-this.field.cellSize),e.x>=this.field.width&&(t=0),e.y>=this.field.height&&(i=0),n=new k.default(t,i));return n||e}},{key:"destroy",value:function(){var t=this;this.body.forEach(function(e){t.field.deleteCell(e)})}},{key:"speed",get:function(){var e=this.baseSpeed;if(this.consumed){var t=this.speedEasing(this.consumed/50);e=Math.round(this.baseSpeed-(this.baseSpeed-this.minimumSpeed)*t)}return e}},{key:"size",get:function(){return this.body.length}},{key:"head",get:function(){return this.body[0]}}]),h}()}]);