!function(l){function e(e){for(var t,i,n=e[0],s=e[1],r=e[2],o=0,a=[];o<n.length;o++)i=n[o],u[i]&&a.push(u[i][0]),u[i]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(l[t]=s[t]);for(d&&d(e);a.length;)a.shift()();return h.push.apply(h,r||[]),c()}function c(){for(var e,t=0;t<h.length;t++){for(var i=h[t],n=!0,s=1;s<i.length;s++){var r=i[s];0!==u[r]&&(n=!1)}n&&(h.splice(t--,1),e=o(o.s=i[0]))}return e}var i={},u={6:0,2:0,3:0,4:0,5:0,7:0,9:0,10:0,11:0,12:0},h=[];function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=l,o.c=i,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var s=0;s<t.length;s++)e(t[s]);var d=n;h.push([19,0]),c()}([,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return l});var n=i(1),s=i.n(n),r=i(2),o=i.n(r);function a(e){var t=Math.round(Math.random()*(e.sizeX-1))*e.cellSize,i=Math.round(Math.random()*(e.sizeY-1))*e.cellSize;return new l(t,i)}var l=function(){function i(e,t){s()(this,i),this.x=e,this.y=t}return o()(i,null,[{key:"generate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=a(e),n=null;if(!t)for(;!n;)e.coordsIntersectingWithSnakes(i)?i=a(e):n=i;return n||i}}]),i}()},function(e,t,i){"use strict";i.r(t),i.d(t,"DIRECTION_LEFT",function(){return a}),i.d(t,"DIRECTION_RIGHT",function(){return l}),i.d(t,"DIRECTION_UP",function(){return c}),i.d(t,"DIRECTION_DOWN",function(){return d}),i.d(t,"default",function(){return u});var n=i(1),h=i.n(n),s=i(2),r=i.n(s),o=i(6),a="DIRECTION_LEFT",l="DIRECTION_RIGHT",c="DIRECTION_UP",d="DIRECTION_DOWN",u=function(){function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.left,n=void 0===i?"ArrowLeft":i,s=t.right,r=void 0===s?"ArrowRight":s,o=t.up,a=void 0===o?"ArrowUp":o,l=t.down,c=void 0===l?"ArrowDown":l;h()(this,u),this.app=e,this.direction=null,this.keysPressed={},this.kLeft=n,this.kRight=r,this.kUp=a,this.kDown=c,this.init()}return r()(u,[{key:"init",value:function(){var t=this;window.addEventListener("keydown",function(e){if(t.app.state===o.STATE_PAUSED||t.app.state===o.STATE_STOPPED)return!1;t.keyDown(e)}),window.addEventListener("keyup",function(e){if(t.app.state===o.STATE_PAUSED||t.app.state===o.STATE_STOPPED)return!1;t.keyUp(e)})}},{key:"keyDown",value:function(e){this.keysPressed[e.code]=performance.now(),this.selectDirection()}},{key:"keyUp",value:function(e){this.keysPressed[e.code]=0,this.selectDirection()}},{key:"selectDirection",value:function(){var i=this,n=null,s=0;switch(Object.keys(this.keysPressed).forEach(function(e){var t=i.keysPressed[e];(!s&&t||s&&t&&s<t)&&(n=e,s=t)}),n){case this.kLeft:this.direction=a;break;case this.kRight:this.direction=l;break;case this.kUp:this.direction=c;break;case this.kDown:this.direction=d}}}]),u}()},function(e,t,i){"use strict";i.r(t),i.d(t,"STATE_INITIALIZED",function(){return f}),i.d(t,"STATE_PAUSED",function(){return v}),i.d(t,"STATE_RUNNING",function(){return p}),i.d(t,"STATE_STOPPED",function(){return k}),i.d(t,"default",function(){return w});var n=i(1),r=i.n(n),s=i(2),o=i.n(s),a=i(3),l=i.n(a),c=i(0),u=i.n(c),h=i(8),d=i(14),f="STATE_INITIALIZED",v="STATE_PAUSED",p="STATE_RUNNING",k="STATE_STOPPED",w=function(){function s(e){var i=this,t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).debug,n=void 0!==t&&t;r()(this,s),y.set(this,{writable:!0,value:!1}),g.set(this,{writable:!0,value:null}),S.set(this,{writable:!0,value:f}),T.set(this,{writable:!0,value:0}),E.set(this,{writable:!0,value:[]}),b.set(this,{writable:!0,value:[]}),m.set(this,{writable:!0,value:function(){u()(i,b).app=i,window.addEventListener("keypress",function(e){u()(i,I).call(i,e)}),window.addEventListener("blur",function(){i.stop()}),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?i.start():i.stop()}),window.addEventListener("focus",function(){i.start()})}}),I.set(this,{writable:!0,value:function(e){switch(e.code){case"Space":switch(u()(i,S)){case p:i.pause();break;case v:i.start()}break;case"Enter":u()(i,b).addSnake()}}}),D.set(this,{writable:!0,value:function(e){var t=u()(i,x).call(i,e);u()(i,O).call(i,t),u()(i,z).call(i,t),u()(i,R).call(i),u()(i,S)!==k&&l()(i,g,window.requestAnimationFrame(u()(i,D)))}}),x.set(this,{writable:!0,value:function(e){var t=e-u()(i,T);return l()(i,T,e),t}}),O.set(this,{writable:!0,value:function(e){u()(i,b).update(e)}}),z.set(this,{writable:!0,value:function(e){u()(i,b).draw(e)}}),A.set(this,{writable:!0,value:function(e){return 1<u()(i,b).snakes.length?u()(i,b).killSnake(e):(l()(i,y,!0),i.stop(),u()(i,R).call(i,u()(i,b).gameOver),d.default.checkScore(u()(i,b).snakes[0].score)),!0}}),R.set(this,{writable:!0,value:function(e){e?u()(i,E).push(e):(u()(i,E).forEach(function(e){return e()}),l()(i,E,[]))}}),this.debug=n,l()(this,b,e),u()(this,m).call(this)}return o()(s,[{key:"start",value:function(){u()(this,y)||(l()(this,S,p),u()(this,g)||(l()(this,T,performance.now()),l()(this,g,window.requestAnimationFrame(u()(this,D)))))}},{key:"pause",value:function(){l()(this,S,v)}},{key:"stop",value:function(){window.cancelAnimationFrame(u()(this,g)),l()(this,g,null),l()(this,S,k)}},{key:"cellIntersectingWithObstacles",value:function(e,t){var i=u()(this,b).getCell(t);return h.default.isBody(i)?u()(this,A).call(this,e):!u()(this,b).endless&&(!!this.coorsOutsideField(t)&&u()(this,A).call(this,e))}},{key:"coorsOutsideField",value:function(e){return e.x<0||e.x>=u()(this,b).width||e.y<0||e.y>=u()(this,b).height}},{key:"isGameOver",get:function(){return u()(this,y)}},{key:"state",get:function(){return u()(this,S)}}]),s}(),y=new WeakMap,g=new WeakMap,S=new WeakMap,T=new WeakMap,E=new WeakMap,b=new WeakMap,m=new WeakMap,I=new WeakMap,D=new WeakMap,x=new WeakMap,O=new WeakMap,z=new WeakMap,A=new WeakMap,R=new WeakMap},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return l});var n=i(1),s=i.n(n),r=i(2),o=i.n(r),a=i(4),l=function(){function n(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).animationSpeed,i=void 0===t?0:t;s()(this,n),this.coords=e,this.msPassed=0,this.animationSpeed=i}return o()(n,[{key:"tick",value:function(e){this.msPassed+=e,this.animationSpeed?this.deTick(this.update):this.update()}},{key:"deTick",value:function(e){this.msPassed>=this.animationSpeed&&(this.msPassed=this.msPassed-this.animationSpeed,e(),this.deTick(e))}},{key:"update",value:function(){}}],[{key:"generate",value:function(e){return new n(a.default.generate(e))}}]),n}()},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return f});var n=i(1),s=i.n(n),r=i(2),o=i.n(r),a=i(9),l=i.n(a),c=i(10),u=i.n(c),h=i(11),d=i.n(h),f=function(e){function n(e,t){var i;return s()(this,n),(i=l()(this,u()(n).call(this,t))).snake=e,i}return d()(n,e),o()(n,null,[{key:"isBody",value:function(e){return e instanceof n}}]),n}(i(7).default)},,,,,,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return a});var n=i(1),s=i.n(n),r=i(2),o=i.n(r),a=function(){function r(){s()(this,r)}return o()(r,null,[{key:"checkScore",value:function(n){if(n){var e=r.score,s=e.length?-1:0;e.forEach(function(e,t){var i=e.points;s<0&&i<n&&(s=t)}),r.addScore(n,s)}}},{key:"addScore",value:function(e,t){var i=prompt("Whats your name?");if(i){var n={name:i,points:e,date:new Date},s=r.score;t<0?s.push(n):s.splice(t,0,n),5<s.length&&s.pop(),localStorage.setItem("snaked-score",JSON.stringify(s))}}},{key:"score",get:function(){var e=localStorage.getItem("snaked-score")||"[]",t=null;try{t=JSON.parse(e)}catch(e){t=[]}return t}}]),r}()},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return w});var n=i(1),c=i.n(n),s=i(2),r=i.n(s),o=i(9),u=i.n(o),a=i(10),h=i.n(a),l=i(11),d=i.n(l),f=i(13),v=i.n(f),p=i(12),k=i.n(p),w=function(e){function l(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=n.power,r=void 0===s?1:s,o=n.score,a=void 0===o?100:o;return c()(this,l),i=u()(this,h()(l).call(this,t)),k()(v()(v()(i)),"update",function(){i.hue+=i.hueStep*i.hueDirection,255<i.hue&&(i.hueDirection*=-1,i.hue=255),i.hue<0&&(i.hueDirection*=-1,i.hue=0),i.currentZoom+=i.zoomStep*i.zoomDirection,(i.zoomDirection&&i.currentZoom>=i.zoom||i.zoomDirection&&i.currentZoom<=-i.zoom)&&(i.zoomDirection=-1*i.zoomDirection),i.currentDegree+=i.degreeStep,i.currentDegree>=i.rotate&&(i.currentDegree=0)}),k()(v()(v()(i)),"draw",function(e){e.save(),e.translate(i.coords.x+i.field.cellSize/2,i.coords.y+i.field.cellSize/2),e.rotate(i.currentDegree*Math.PI/180),e.translate(-i.coords.x-i.field.cellSize/2,-i.coords.y-i.field.cellSize/2),e.fillStyle="hsl("+i.hue+",100%,50%)",e.fillRect(i.coords.x-i.currentZoom,i.coords.y-i.currentZoom,i.field.cellSize+2*i.currentZoom,i.field.cellSize+2*i.currentZoom),e.restore()}),i.field=e,i.power=r,i.score=a,i.hue=0,i.hueDirection=1,i.hueStep=3,i.zoom=1,i.currentZoom=0,i.zoomStep=.1,i.zoomDirection=1,i.rotate=360,i.currentDegree=0,i.degreeStep=1,i}return d()(l,e),r()(l,[{key:"consume",value:function(){this.destroy()}},{key:"destroy",value:function(){var i=this,n=null;this.field.food.forEach(function(e,t){e===i&&(n=t)});var e=this.field.food.splice(n,1)[0];this.field.deleteCell(e)}}],[{key:"isFood",value:function(e){return e instanceof l}}]),l}(i(7).default)},function(e,t,i){"use strict";i.r(t),i.d(t,"DRAWTEXT_ALIGN_CENTER",function(){return a}),i.d(t,"drawText",function(){return n});var a="center";function n(t,i,e){var n=e.padding||0,s=0,r=0;switch(e.lines.forEach(function(e){t.font=e.font,e.width=t.measureText(e.text).width,e.width>s&&(s=e.width),r+=e.height}),t.save(),e.align){case a:t.translate(0,(i.height-r-2*n)/2),t.fillStyle=e.bgcolor,t.globalAlpha=e.bgAlpha||1,t.fillRect(i.width/2-s/2-n,0,s+2*n,r+2*n),t.globalAlpha=e.alpha||1;var o=n;e.lines.forEach(function(e){t.textBaseline=e.baseline||"middle",t.fillStyle=e.color||"black",t.font=e.font,t.fillText(e.text,i.width/2-e.width/2,o+e.height/2),o+=e.height})}t.restore()}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return u});var n=i(1),d=i.n(n),s=i(2),r=i.n(s),o=i(12),f=i.n(o),a=i(18),v=i.n(a),p=i(6),k=i(5),w=i(4),l=i(8),c=i(15),u=function(){function h(e,t,i){var o=this,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=n.speed,r=void 0===s?5:s,a=n.toGrow,l=void 0===a?2:a,c=n.color,u=void 0===c?"black":c;d()(this,h),f()(this,"move",function(){if(o.app.state!==p.STATE_RUNNING)return!1;var e=o.head.coords,t=e.x,i=e.y,n=null,s=o.checkReverse()?o.direction:o.controls.direction;switch(s){case k.DIRECTION_LEFT:n=new w.default(t-o.field.cellSize,i);break;case k.DIRECTION_RIGHT:n=new w.default(t+o.field.cellSize,i);break;case k.DIRECTION_UP:n=new w.default(t,i-o.field.cellSize);break;case k.DIRECTION_DOWN:n=new w.default(t,i+o.field.cellSize)}if(o.controls.direction&&!o.app.cellIntersectingWithObstacles(o,n)){var r=o.sideTravel(n);o.direction=s,o.eat(r)}}),this.app=e,this.field=t,this.controls=i,this.body=[],this.baseSpeed=200-10*(r-1),this.minimumSpeed=20,this.direction=null,this.passed=0,this.toGrow=l,this.consumed=0,this.score=0,this.color=u,this.speedEasing=v()(.25,.46,.45,.94)}return r()(h,[{key:"tick",value:function(e){this.passed+=e,this.deTick(this.move)}},{key:"deTick",value:function(e){this.passed>=this.speed&&(this.passed=this.passed-this.speed,e(),this.deTick(e))}},{key:"spawn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=null!=e&&null!=t?new w.default(e,t):w.default.generate(this.field),n=new l.default(this,i);this.body.push(n),this.field.writeCell(n)}},{key:"checkReverse",value:function(){return this.direction===k.DIRECTION_LEFT&&this.controls.direction===k.DIRECTION_RIGHT||this.direction===k.DIRECTION_RIGHT&&this.controls.direction===k.DIRECTION_LEFT||this.direction===k.DIRECTION_UP&&this.controls.direction===k.DIRECTION_DOWN||this.direction===k.DIRECTION_DOWN&&this.controls.direction===k.DIRECTION_UP}},{key:"addBody",value:function(e){var t=new l.default(this,e);this.body.unshift(t),this.field.writeCell(t),this.tailTrimmer()}},{key:"eat",value:function(e){this.feed(e),this.addBody(e)}},{key:"feed",value:function(e){var t=this.field.getCell(e);c.default.isFood(t)&&(this.consumed++,this.score+=t.score,this.toGrow=t.power,t.consume())}},{key:"tailTrimmer",value:function(){if(this.toGrow)return this.toGrow--,!1;var e=this.body.pop();this.field.deleteCell(e)}},{key:"sideTravel",value:function(e){var t,i,n=null;(e.x<0||e.x>=this.field.width||e.y<0||e.y>=this.field.height)&&(e.x<0&&(t=this.field.width-this.field.cellSize),e.y<0&&(i=this.field.height-this.field.cellSize),e.x>=this.field.width&&(t=0),e.y>=this.field.height&&(i=0),n=new w.default(t,i));return n||e}},{key:"destroy",value:function(){var t=this;this.body.forEach(function(e){t.field.deleteCell(e)})}},{key:"speed",get:function(){var e=this.baseSpeed;if(this.consumed){var t=this.speedEasing(this.consumed/50);e=Math.round(this.baseSpeed-(this.baseSpeed-this.minimumSpeed)*t)}return e}},{key:"size",get:function(){return this.body.length}},{key:"head",get:function(){return this.body[0]}}]),h}()},,function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return h});var n=i(1),d=i.n(n),s=i(2),r=i.n(s),o=i(12),f=i.n(o),a=i(5),l=i(4),c=i(15),u=i(14),v=i(17),p=i(16),h=function(){function h(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.width,s=void 0===n?20:n,r=i.height,o=void 0===r?20:r,a=i.cellSize,l=void 0===a?10:a,c=i.endless,u=void 0!==c&&c;d()(this,h),f()(this,"gameOver",function(){t.clearField(),t.draw(),Object(p.drawText)(t.ctx,t,{align:p.DRAWTEXT_ALIGN_CENTER,padding:2,bgcolor:"#ffffff",bgAlpha:.75,lines:[{font:"bold 14px Arial",height:14,text:"GAME OVER"},{font:"12px Arial",height:12,text:"SCORE: ".concat(t.snakes[0].score)}]})}),this.app=null,this.sizeX=s,this.sizeY=o,this.cellSize=l,this.width=s*this.cellSize,this.height=o*this.cellSize,this.snakes=[],this.cells=[],this.food=[],this.walls=[],this.endless=u,this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.init()}return r()(h,[{key:"init",value:function(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px";for(var e=0;e<this.sizeY;e++){for(var t=[],i=0;i<this.sizeX;i++)t.push(null);this.cells.push(t)}}},{key:"addSnake",value:function(e){if(this.snakes.length){if(1===this.snakes.length){var t=new a.default(this.app,{left:"KeyA",right:"KeyD",up:"KeyW",down:"KeyS"}),i=new v.default(this.app,this,t,{color:"red"});this.snakes.push(i),i.spawn()}}else{if(!e){var n=new a.default(this.app);e=new v.default(this.app,this,n)}this.snakes.push(e),e.spawn()}}},{key:"killSnake",value:function(t){var e=this.snakes.findIndex(function(e){return e===t});this.snakes.splice(e,1),t.destroy()}},{key:"getCell",value:function(e){var t;return null===(t=this.cells[e.y/this.cellSize])||void 0===t?void 0:t[e.x/this.cellSize]}},{key:"writeCell",value:function(e){return this.cells[e.coords.y/this.cellSize][e.coords.x/this.cellSize]=e}},{key:"deleteCell",value:function(e){return!(this.cells[e.coords.y/this.cellSize][e.coords.x/this.cellSize]=null)}},{key:"update",value:function(t){this.snakes.forEach(function(e){return e.tick(t)}),this.generateFood()}},{key:"generateFood",value:function(){if(!this.food.length){var e=l.default.generate(this),t=new c.default(this,e);this.writeCell(t),this.food.push(t)}}},{key:"draw",value:function(e){this.clearField(),this.drawSnakes(),this.drawFood(e),this.snakes.length||this.app.isGameOver||this.drawScore(),this.app.debug&&e&&this.drawDebug(e)}},{key:"drawScore",value:function(){var e=u.default.score;if(e.length){var n=[];e.forEach(function(e){var t=e.name,i=e.points;n.push({font:"12px Arial",height:12,text:"".concat(t," ").concat(i)})}),Object(p.drawText)(this.ctx,this,{align:p.DRAWTEXT_ALIGN_CENTER,padding:2,bgcolor:"#ffffff",bgAlpha:.75,lines:[{font:"bold 14px Arial",height:14,text:"BEST SCORES"}].concat(n)})}}},{key:"clearField",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"drawSnakes",value:function(){var t=this;this.snakes.forEach(function(e){return t.drawSnake(e)})}},{key:"drawSnake",value:function(e){var s=this;this.ctx.save(),this.ctx.fillStyle=e.color,e.body.forEach(function(e){var t=e.coords,i=t.x,n=t.y;s.ctx.fillRect(i,n,s.cellSize,s.cellSize)}),this.ctx.restore()}},{key:"drawFood",value:function(t){var i=this;this.food.forEach(function(e){e.tick(t),e.draw(i.ctx)})}},{key:"drawDebug",value:function(e){this.ctx.font="bold 10px Arial";var t=0<e?Math.round(1e3/e):"00",i="FPS: ".concat(t);this.ctx.fillStyle="black",this.ctx.globalAlpha=.5,this.ctx.fillText(i,this.cellSize,this.height-this.cellSize),this.ctx.globalAlpha=1}},{key:"coordsIntersectingWithSnakes",value:function(t){var i=!1;return this.snakes.forEach(function(e){i||e.body.forEach(function(e){t.x===e.coords.x&&t.y===e.coords.y&&(i=!0)})}),i}}]),h}()}]);